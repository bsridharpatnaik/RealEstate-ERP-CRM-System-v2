-- Supplier
CREATE OR REPLACE VIEW supplier as 
SELECT 
c.contact_id,c.name,c.mobile_no,c.email_id,c.contact_type,ci.contact_person,
ci.contact_person_mobile_no,ci.gst_number,
a.addr_line1,a.addr_line2,a.city,a.state,a.zip
FROM contact c
LEFT JOIN  contact_info ci on c.contact_id=ci.contact_id
INNER JOIN address a on a.addr_id = c.addr_id
WHERE 
c.contact_type='SUPPLIER'
AND ci.is_deleted=0;


-- Contrator
CREATE OR REPLACE VIEW contractor as 
SELECT 
c.contact_id,c.name,c.mobile_no,c.email_id,c.contact_type,ci.contact_person,
ci.contact_person_mobile_no,ci.gst_number,
a.addr_line1,a.addr_line2,a.city,a.state,a.zip
FROM contact c
LEFT JOIN  contact_info ci on c.contact_id=ci.contact_id
INNER JOIN address a on a.addr_id = c.addr_id
WHERE 
c.contact_type='CONTRACTOR'
AND ci.is_deleted=0;

-- All contacts
CREATE OR REPLACE VIEW AllContacts as 
SELECT 
c.contact_id,c.name,c.mobile_no,c.email_id,c.contact_type,ci.contact_person,
ci.contact_person_mobile_no,ci.gst_number,
a.addr_line1,a.addr_line2,a.city,a.state,a.zip
FROM contact c
LEFT JOIN  contact_info ci on c.contact_id=ci.contact_id
INNER JOIN address a on a.addr_id = c.addr_id
WHERE ci.is_deleted=0 OR ci.is_deleted IS NULL;
			  
